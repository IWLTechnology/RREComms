"http:"===location.protocol&&(location.protocol="https:"),"serviceWorker"in navigator?navigator.serviceWorker.register("service-worker.js").then(e=>console.log("Service Worker registered",e)).catch(e=>console.error("Service Worker **not** registered",e)):console.warn("Service Worker not supported in this browser");const isInstalledPWA=window.matchMedia("(display-mode: standalone)").matches,isIOS=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),isAndroid=/android/i.test(navigator.userAgent);function showInstalledBlocks(){isInstalledPWA?(document.querySelectorAll(".show-for-browser").forEach(e=>{e.style.display="none"}),document.querySelectorAll(".show-for-installed").forEach(e=>{e.style.display="block"})):(document.querySelectorAll(".show-for-browser").forEach(e=>{e.style.display="block"}),document.querySelectorAll(".show-for-installed").forEach(e=>{e.style.display="none"}))}let installPrompt=null;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),installPrompt=e,installButton.removeAttribute("hidden")});const installButton=document.getElementsByClassName("install")[0];installButton.addEventListener("click",async()=>{if(!installPrompt)return;let e=await installPrompt.prompt();console.log(`Install prompt was: ${e.outcome}`),installPrompt=null,installButton.setAttribute("hidden","")}),showInstalledBlocks();const installNudge=document.querySelector("#install-nudge"),closeButton=document.getElementById("close-button"),hideBanner=localStorage.getItem("hide-install-nudge");function handleCloseButton(){localStorage.setItem("hide-install-nudge",!0),installNudge.style.display="none"}function showOrientationBlocks(){"portrait-primary"==screen.orientation.type||"portrait-secondary"==screen.orientation.type?(document.querySelectorAll(".show-for-portrait").forEach(e=>{e.style.display="block"}),document.querySelectorAll(".show-for-landscape").forEach(e=>{e.style.display="none"})):("landscape-primary"==screen.orientation.type||"landscape-secondary"==screen.orientation.type)&&(document.querySelectorAll(".show-for-portrait").forEach(e=>{e.style.display="none"}),document.querySelectorAll(".show-for-landscape").forEach(e=>{e.style.display="block"}))}function rotateWithNoScale(){let e=document.querySelector("meta[name=viewport]");if(e){let t=e.getAttribute("content");e.setAttribute("content",t+", maximum-scale=1.0"),setTimeout(function(){e.setAttribute("content",t)},100)}}isInstalledPWA||!installNudge||hideBanner?installNudge.style.display="none":(installNudge.style.display="block",closeButton.addEventListener("click",handleCloseButton)),screen.orientation.addEventListener("change",function(e){isIOS&&rotateWithNoScale(),showOrientationBlocks()}),showOrientationBlocks();